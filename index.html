<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DineLogic | Culinary Intelligence</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/recharts/umd/Recharts.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;1,700&family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #fdfcf7; margin: 0; }
        .font-serif { font-family: 'Playfair Display', serif; }
        .glass-sidebar { background: linear-gradient(180deg, #1a1c18 0%, #121411 100%); }
        .premium-shadow { box-shadow: 0 20px 40px rgba(0,0,0,0.04); }
        .custom-scrollbar::-webkit-scrollbar { width: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #333; border-radius: 10px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-in { animation: fadeIn 0.8s ease-out forwards; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, BarChart, Bar, Cell } = Recharts;

        // --- Mock Data from types.ts & constants ---
        const CHART_DATA = [
            { name: 'Mon', revenue: 4200, noShows: 4 },
            { name: 'Tue', revenue: 3800, noShows: 2 },
            { name: 'Wed', revenue: 5100, noShows: 3 },
            { name: 'Thu', revenue: 6400, noShows: 5 },
            { name: 'Fri', revenue: 9200, noShows: 1 },
            { name: 'Sat', revenue: 11500, noShows: 2 },
            { name: 'Sun', revenue: 7800, noShows: 4 },
        ];

        const MOCK_RESERVATIONS = [
            { id: '1', guestName: 'David Chen', partySize: 4, dateTime: '2023-11-20T19:30:00', status: 'confirmed', source: 'web' },
            { id: '2', guestName: 'Sarah Miller', partySize: 2, dateTime: '2023-11-20T20:15:00', status: 'confirmed', source: 'sms' },
            { id: '3', guestName: 'James Wilson', partySize: 6, dateTime: '2023-11-21T18:00:00', status: 'pending', source: 'phone' },
            { id: '4', guestName: 'Emily Blunt', partySize: 2, dateTime: '2023-11-20T18:00:00', status: 'confirmed', source: 'web' },
        ];

        // --- Shared Components ---
        const NavIcon = ({ type, active }) => {
            const color = active ? "text-[#d4af37]" : "text-stone-500";
            switch(type) {
                case 'dashboard': return <svg className={`w-5 h-5 ${color}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z" /></svg>;
                case 'reservations': return <svg className={`w-5 h-5 ${color}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg>;
                case 'reviews': return <svg className={`w-5 h-5 ${color}`} fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-7.714 2.143L11 21l-2.286-6.857L1 12l7.714-2.143L11 3z" /></svg>;
                default: return null;
            }
        };

        const StatCard = ({ label, value, trend, icon, inverse = false }) => {
            const isPositive = trend.startsWith('+');
            const colorClass = isPositive ? (inverse ? 'text-rose-700' : 'text-emerald-700') : (inverse ? 'text-emerald-700' : 'text-rose-700');
            return (
                <div className="bg-white p-8 rounded-[2rem] premium-shadow border border-stone-100 relative overflow-hidden group hover:border-[#d4af37]/30 transition-all duration-500 hover:-translate-y-1">
                    <div className="absolute top-0 right-0 p-6 text-[#d4af37] opacity-10 group-hover:scale-110 transition-transform">{icon}</div>
                    <div className="relative z-10">
                        <p className="text-stone-400 text-[10px] font-extrabold uppercase tracking-[0.2em] mb-3">{label}</p>
                        <h3 className="text-4xl font-serif font-bold text-stone-900 tracking-tight">{value}</h3>
                        <div className={`inline-flex items-center gap-1.5 mt-4 px-2.5 py-1 rounded-full text-[11px] font-bold ${colorClass} bg-stone-50`}>
                            <span>{isPositive ? 'â†‘' : 'â†“'}</span> {trend} <span className="text-stone-400 font-normal ml-1">vs prev</span>
                        </div>
                    </div>
                </div>
            );
        };

        // --- Feature: Market Dashboard ---
        const Dashboard = ({ stats }) => (
            <div className="space-y-12 animate-in">
                <header className="flex flex-col md:flex-row justify-between items-start md:items-end gap-6">
                    <div>
                        <div className="flex items-center gap-3 mb-2">
                            <span className="w-8 h-[2px] bg-[#d4af37]"></span>
                            <span className="text-[10px] font-bold uppercase tracking-[0.4em] text-[#d4af37]">Performance Report</span>
                        </div>
                        <h2 className="text-5xl font-serif font-bold text-stone-900 leading-tight">House Overview</h2>
                        <p className="text-stone-500 text-lg mt-2 font-medium italic">Operational excellence at a glance.</p>
                    </div>
                    <div className="bg-white border border-stone-200 px-6 py-3 rounded-2xl flex items-center gap-3 shadow-sm">
                        <div className="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                        <span className="text-[10px] font-bold uppercase tracking-widest text-stone-600">Cloud Sync: Active</span>
                    </div>
                </header>

                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <StatCard label="Guest Rating" value={stats.starRating.toFixed(1)} trend="+0.4" icon="â­" />
                    <StatCard label="No-Show Frequency" value={`${stats.noShowRate}%`} trend="-6.2%" icon="â³" inverse={true} />
                    <StatCard label="Cover Utilization" value={`${stats.tableUtilization}%`} trend="+12.4%" icon="ðŸ“Š" />
                    <StatCard label="Revenue Gain" value={`$${(stats.revenueGain/1000).toFixed(1)}k`} trend="+18%" icon="ðŸ’°" />
                </div>

                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div className="bg-white p-10 rounded-[2.5rem] premium-shadow border border-stone-100 h-[400px]">
                        <h3 className="text-2xl font-serif font-bold mb-8">Revenue Velocity</h3>
                        <ResponsiveContainer width="100%" height="80%">
                            <AreaChart data={CHART_DATA}>
                                <defs>
                                    <linearGradient id="colorRev" x1="0" y1="0" x2="0" y2="1">
                                        <stop offset="5%" stopColor="#d4af37" stopOpacity={0.15}/><stop offset="95%" stopColor="#d4af37" stopOpacity={0}/>
                                    </linearGradient>
                                </defs>
                                <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f0f0f0" />
                                <XAxis dataKey="name" axisLine={false} tickLine={false} tick={{fill: '#a8a29e', fontSize: 11}} />
                                <YAxis axisLine={false} tickLine={false} tick={{fill: '#a8a29e', fontSize: 11}} />
                                <Tooltip contentStyle={{borderRadius: '20px', border: 'none', boxShadow: '0 20px 40px rgba(0,0,0,0.1)'}} />
                                <Area type="monotone" dataKey="revenue" stroke="#d4af37" strokeWidth={4} fill="url(#colorRev)" />
                            </AreaChart>
                        </ResponsiveContainer>
                    </div>
                    <div className="bg-white p-10 rounded-[2.5rem] premium-shadow border border-stone-100 h-[400px]">
                        <h3 className="text-2xl font-serif font-bold mb-8">System Efficiency</h3>
                        <ResponsiveContainer width="100%" height="80%">
                            <BarChart data={CHART_DATA}>
                                <CartesianGrid strokeDasharray="3 3" vertical={false} stroke="#f0f0f0" />
                                <XAxis dataKey="name" axisLine={false} tickLine={false} tick={{fill: '#a8a29e', fontSize: 11}} />
                                <YAxis axisLine={false} tickLine={false} tick={{fill: '#a8a29e', fontSize: 11}} />
                                <Tooltip cursor={{fill: '#fcfcfc'}} />
                                <Bar dataKey="noShows" radius={[8, 8, 0, 0]}>
                                    {CHART_DATA.map((entry, index) => (
                                        <Cell key={`cell-${index}`} fill={index === 4 ? '#2d5a27' : '#e5e1d8'} />
                                    ))}
                                </Bar>
                            </BarChart>
                        </ResponsiveContainer>
                    </div>
                </div>
            </div>
        );

        // --- Feature: Reservation Manager & Concierge AI ---
        const ReservationManager = () => {
            const [messages, setMessages] = useState([]);
            const [loading, setLoading] = useState(false);

            const handleAIQuery = (query) => {
                setLoading(true);
                setMessages(prev => [...prev, { role: 'owner', text: query }]);
                // Simulating the geminiService.processOwnerQuery logic [cite: 339, 357]
                setTimeout(() => {
                    const responses = {
                        "Dinner Summary": "House Ledger Analysis: 4 covers confirmed for tonight. Peak utilization expected at 19:30.",
                        "Staff Briefing": "Briefing Note: Focus on VIP Sarah Miller (returning guest). Ensure Wagyu prep is standard.",
                        "VIP Patterns": "VIP Alert: David Chen prefers corner table. Sarah Miller is high-frequency weekend guest."
                    };
                    setMessages(prev => [...prev, { role: 'ai', text: responses[query] || "Analysis complete. Data synchronized with house ledger." }]);
                    setLoading(false);
                }, 1000);
            };

            return (
                <div className="grid grid-cols-1 lg:grid-cols-3 gap-10 animate-in">
                    <div className="lg:col-span-2 space-y-8">
                        <div className="flex justify-between items-center">
                            <h2 className="text-4xl font-serif font-bold text-stone-900">House Reservations</h2>
                            <button className="bg-gradient-to-br from-[#d4af37] to-[#8a6d1d] text-stone-900 px-8 py-3 rounded-2xl text-[11px] font-bold uppercase tracking-widest shadow-lg">Manual Add</button>
                        </div>
                        <div className="bg-white rounded-[2rem] premium-shadow border border-stone-100 overflow-hidden">
                            <table className="w-full text-left">
                                <thead className="bg-stone-50/50 text-stone-400 text-[10px] font-bold uppercase tracking-[0.2em]">
                                    <tr><th className="px-8 py-6">Guest Profile</th><th className="px-8 py-6 text-center">Covers</th><th className="px-8 py-6">Service Time</th><th className="px-8 py-6">Status</th></tr>
                                </thead>
                                <tbody className="divide-y divide-stone-50">
                                    {MOCK_RESERVATIONS.map(res => (
                                        <tr key={res.id} className="hover:bg-stone-50/80 transition-all">
                                            <td className="px-8 py-6 font-bold text-stone-800">{res.guestName}</td>
                                            <td className="px-8 py-6 text-center"><span className="w-10 h-10 rounded-xl border flex items-center justify-center mx-auto shadow-sm">{res.partySize}</span></td>
                                            <td className="px-8 py-6 text-sm font-bold">{res.dateTime.split('T')[1].substring(0,5)}</td>
                                            <td className="px-8 py-6">
                                                <span className={`px-4 py-1.5 rounded-full text-[10px] font-bold uppercase ${res.status === 'confirmed' ? 'bg-emerald-50 text-emerald-700 border border-emerald-100' : 'bg-amber-50 text-amber-700 border border-amber-100'}`}>
                                                    {res.status}
                                                </span>
                                            </td>
                                        </tr>
                                    ))}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div className="glass-sidebar rounded-[2.5rem] p-8 text-stone-100 h-[650px] flex flex-col shadow-2xl relative overflow-hidden">
                        <h3 className="text-xl font-serif font-bold text-white mb-6">Concierge AI</h3>
                        <div className="flex flex-wrap gap-2 mb-8">
                            {["Dinner Summary", "Staff Briefing", "VIP Patterns"].map(cmd => (
                                <button key={cmd} onClick={() => handleAIQuery(cmd)} className="px-3 py-2 rounded-xl bg-stone-900/50 border border-stone-800 text-[10px] font-bold text-stone-400 hover:text-[#d4af37] transition-all uppercase">{cmd}</button>
                            ))}
                        </div>
                        <div className="flex-1 overflow-y-auto space-y-4 custom-scrollbar pr-2">
                            {messages.length === 0 && <p className="text-stone-500 text-sm italic">Operational Relay active. Select a briefing command above.</p>}
                            {messages.map((m, i) => (
                                <div key={i} className={`flex flex-col ${m.role === 'owner' ? 'items-end' : 'items-start'}`}>
                                    <span className="text-[9px] uppercase tracking-widest font-bold mb-1 text-stone-500">{m.role === 'owner' ? 'Owner' : 'System Intelligence'}</span>
                                    <div className={`max-w-[90%] rounded-2xl px-4 py-3 text-[12px] ${m.role === 'owner' ? 'bg-stone-800 text-white' : 'bg-stone-900 text-stone-300 border border-stone-800'}`}>{m.text}</div>
                                </div>
                            ))}
                            {loading && <div className="text-[#d4af37] text-[10px] animate-pulse font-bold tracking-widest uppercase">Analyzing Ledger...</div>}
                        </div>
                    </div>
                </div>
            );
        };

        // --- Main App Logic (from App.tsx) ---
        const App = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const stats = { noShowRate: 8.4, tableUtilization: 82, starRating: 4.8, revenueGain: 15400 }; [cite: 125, 130]

            return (
                <div className="min-h-screen flex flex-col lg:flex-row">
                    <nav className="w-full lg:w-80 glass-sidebar lg:h-screen sticky top-0 z-50 p-8 flex flex-col border-r border-stone-800 shadow-2xl">
                        <div className="mb-12 flex items-center gap-4">
                            <div className="w-12 h-12 bg-gradient-to-br from-[#d4af37] to-[#8a6d1d] rounded-2xl flex items-center justify-center font-serif text-2xl font-bold text-stone-900 shadow-lg">D</div>
                            <div>
                                <h1 className="text-xl font-bold text-white font-serif">DineLogic</h1>
                                <p className="text-[10px] uppercase tracking-[0.3em] text-[#d4af37] font-bold">Culinary Intelligence</p> [cite: 149]
                            </div>
                        </div>
                        <div className="space-y-3 flex-1">
                            {[
                                { id: 'dashboard', label: 'Market Dashboard', icon: 'dashboard' },
                                { id: 'reservations', label: 'House Reservations', icon: 'reservations' },
                                { id: 'reviews', label: 'Reputation Engine', icon: 'reviews' }
                            ].map(item => (
                                <button
                                    key={item.id}
                                    onClick={() => setActiveTab(item.id)}
                                    className={`w-full flex items-center gap-4 px-4 py-4 rounded-2xl transition-all text-sm font-semibold ${activeTab === item.id ? 'bg-[#252822] text-white ring-1 ring-[#d4af37]/30 shadow-lg' : 'text-stone-500 hover:text-stone-300'}`}
                                >
                                    <NavIcon type={item.icon} active={activeTab === item.id} />
                                    <span>{item.label}</span>
                                </button>
                            ))}
                        </div>
                        <div className="mt-auto pt-8 border-t border-stone-800/50">
                            <div className="p-4 bg-stone-900/50 rounded-2xl flex items-center gap-4">
                                <div className="w-10 h-10 rounded-xl bg-[#2d5a27] flex items-center justify-center text-white font-serif italic text-lg shadow-inner">G</div>
                                <div><p className="text-sm font-bold text-stone-100">The Gilded Plate</p><p className="text-[10px] uppercase text-[#d4af37] font-bold">Premium Tier</p></div>
                            </div>
                        </div>
                    </nav>

                    <main className="flex-1 p-8 lg:p-12 overflow-y-auto h-screen bg-[#fdfcf7]">
                        <div className="max-w-6xl mx-auto">
                            {activeTab === 'dashboard' && <Dashboard stats={stats} />}
                            {activeTab === 'reservations' && <ReservationManager />}
                            {activeTab === 'reviews' && (
                                <div className="text-center py-20 animate-in">
                                    <h2 className="text-4xl font-serif font-bold text-stone-900 mb-4">Reputation Engine</h2>
                                    <p className="text-stone-500">Sentiment analysis and AI review drafting are currently monitoring your platform.</p>
                                </div>
                            )}
                        </div>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
